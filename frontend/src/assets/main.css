@import "tailwindcss";

/* Tailwind Forms Plugin - provides properly styled form elements that work with utilities */
@plugin "@tailwindcss/forms";

/* Victorian Typography - Cormorant Garamond */
@import url("https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,500;0,600;0,700;1,500;1,600&display=swap")
layer(utilities);

@theme {
  --font-display: Cormorant Garamond, Georgia, serif;
  --font-sans: Inter, system-ui, sans-serif;

  --color-moxon-50: #f0f5f3;
  --color-moxon-100: #dae8e2;
  --color-moxon-200: #b8d4c9;
  --color-moxon-300: #8dbaa8;
  --color-moxon-400: #5e9a82;
  --color-moxon-500: #3a6b5c;
  --color-moxon-600: #2f5a4b;
  --color-moxon-700: #254a3d;
  --color-moxon-800: #1a3a2f;
  --color-moxon-900: #0f2318;

  --color-victorian-hunter-500: #3a6b5c;
  --color-victorian-hunter-600: #2f5a4b;
  --color-victorian-hunter-700: #254a3d;
  --color-victorian-hunter-800: #1a3a2f;
  --color-victorian-hunter-900: #0f2318;

  --color-victorian-gold-light: #d4af37;
  --color-victorian-gold: #c9a227;
  --color-victorian-gold-dark: #a67c00;
  --color-victorian-gold-muted: #b8956e;

  --color-victorian-burgundy-light: #8b3a42;
  --color-victorian-burgundy: #722f37;
  --color-victorian-burgundy-dark: #5c262e;

  --color-victorian-paper-white: #fdfcfa;
  --color-victorian-paper-cream: #f8f5f0;
  --color-victorian-paper-aged: #f0ebe3;
  --color-victorian-paper-antique: #e8e1d5;

  --color-victorian-ink-black: #1a1a18;
  --color-victorian-ink-dark: #2d2d2a;
  --color-victorian-ink-muted: #5c5c58;

  --color-victorian-forest: #228b22;
  --color-victorian-cream: #fffdd0;

  --color-navy-500: #334155;
  --color-navy-600: #1e293b;
  --color-navy-700: #1a2332;
  --color-navy-800: #111827;
  --color-navy-900: #0a0f1a;

  /* Custom radius for xs - preserves original 2px styling from Tailwind v3 */
  --radius-xs: 0.125rem;

  /* Animation Durations */
  --duration-instant: 75ms;
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --duration-slow: 400ms;
  --duration-slower: 600ms;

  /* Animation Easings */
  --ease-out-soft: cubic-bezier(0.25, 0.1, 0.25, 1);
  --ease-out-back: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

/* Custom styles for BlueMoxon - Victorian Design System */
/* Using @layer components for component classes - @utility with @apply has issues in v4 */
@layer components {
  .btn-primary {
    /* Primary button - Hunter green */
    background-color: var(--color-victorian-hunter-800);
    color: white;
    font-weight: 500;
    padding: 0.5rem 1rem;
    border-radius: var(--radius-xs);
    transition: background-color var(--duration-fast) var(--ease-out-soft),
                transform var(--duration-instant) var(--ease-out-soft);
    border: 1px solid var(--color-victorian-hunter-700);
  }
  .btn-primary:hover {
    background-color: var(--color-victorian-hunter-700);
  }
  .btn-primary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  .btn-primary:active:not(:disabled) {
    transform: scale(0.97);
  }

  .btn-secondary {
    /* Secondary button - Subtle */
    background-color: var(--color-victorian-paper-cream);
    color: var(--color-victorian-ink-dark);
    font-weight: 500;
    padding: 0.5rem 1rem;
    border-radius: var(--radius-xs);
    transition: background-color var(--duration-fast) var(--ease-out-soft),
                transform var(--duration-instant) var(--ease-out-soft);
    border: 1px solid var(--color-victorian-paper-antique);
  }
  .btn-secondary:hover {
    background-color: var(--color-victorian-paper-aged);
  }
  .btn-secondary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  .btn-secondary:active:not(:disabled) {
    transform: scale(0.97);
  }

  .btn-danger {
    /* Danger button */
    background-color: var(--color-victorian-burgundy);
    color: white;
    font-weight: 500;
    padding: 0.5rem 1rem;
    border-radius: var(--radius-xs);
    transition: background-color var(--duration-fast) var(--ease-out-soft),
                transform var(--duration-instant) var(--ease-out-soft);
  }
  .btn-danger:hover {
    background-color: var(--color-victorian-burgundy-dark);
  }
  .btn-danger:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  .btn-danger:active:not(:disabled) {
    transform: scale(0.97);
  }

  .btn-accent {
    /* Accent button - Gold (for special actions) */
    background-color: var(--color-victorian-gold);
    color: var(--color-victorian-ink-black);
    font-weight: 500;
    padding: 0.5rem 1rem;
    border-radius: var(--radius-xs);
    transition: background-color var(--duration-fast) var(--ease-out-soft),
                transform var(--duration-instant) var(--ease-out-soft);
  }
  .btn-accent:hover {
    background-color: var(--color-victorian-gold-dark);
  }
  .btn-accent:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  .btn-accent:active:not(:disabled) {
    transform: scale(0.97);
  }

  .card {
    /* Cards - Warm paper feel */
    background-color: var(--color-victorian-paper-cream);
    border-radius: var(--radius-xs);
    border: 1px solid var(--color-victorian-paper-antique);
    box-shadow: var(--shadow-xs);
    padding: 1.5rem;
    transition: box-shadow 0.15s ease-in-out;
  }
  .card:hover {
    box-shadow: var(--shadow-md);
  }

  .card-static {
    /* Card without hover effect */
    background-color: var(--color-victorian-paper-cream);
    border-radius: var(--radius-xs);
    border: 1px solid var(--color-victorian-paper-antique);
    box-shadow: var(--shadow-xs);
    padding: 1.5rem;
  }

  .input {
    /* Form inputs */
    width: 100%;
    padding: 0.5rem 0.75rem;
    background-color: var(--color-victorian-paper-white);
    border: 1px solid var(--color-victorian-paper-antique);
    border-radius: var(--radius-xs);
    color: var(--color-victorian-ink-black);
  }
  .input::placeholder {
    color: var(--color-victorian-ink-muted);
  }
  .input:focus {
    outline: none;
    box-shadow: 0 0 0 1px var(--color-victorian-gold-muted);
    border-color: var(--color-victorian-gold-muted);
  }

  .select {
    /* Select dropdowns */
    width: 100%;
    padding: 0.5rem 0.75rem;
    background-color: var(--color-victorian-paper-white);
    border: 1px solid var(--color-victorian-paper-antique);
    border-radius: var(--radius-xs);
    color: var(--color-victorian-ink-black);
  }
  .select:focus {
    outline: none;
    box-shadow: 0 0 0 1px var(--color-victorian-gold-muted);
    border-color: var(--color-victorian-gold-muted);
  }

  .badge-binder {
    /* Premium binding badges */
    display: inline-flex;
    align-items: center;
    padding: 0.125rem 0.5rem;
    font-size: 0.75rem;
    font-weight: 500;
    border-radius: var(--radius-xs);
  }

  .badge-zaehnsdorf {
    background-color: var(--color-victorian-burgundy);
    color: white;
  }

  .badge-riviere {
    background-color: var(--color-victorian-hunter-800);
    color: var(--color-victorian-gold-light);
  }

  .badge-sangorski {
    background-color: var(--color-victorian-gold);
    color: var(--color-victorian-ink-black);
  }

  .badge-bayntun {
    background-color: var(--color-victorian-ink-dark);
    color: var(--color-victorian-paper-cream);
  }

  .badge-default {
    background-color: var(--color-victorian-hunter-700);
    color: white;
  }

  .divider-flourish {
    /* Section divider with flourish */
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 2rem 0;
  }
  .divider-flourish::before,
  .divider-flourish::after {
    content: "";
    height: 1px;
    width: 4rem;
    background-color: var(--color-victorian-paper-antique);
  }

  .divider-flourish-symbol {
    margin: 0 1rem;
    color: var(--color-victorian-gold-muted);
  }

  .section-header {
    /* Section header with border */
    border-bottom: 1px solid var(--color-victorian-paper-antique);
    padding-bottom: 0.5rem;
    margin-bottom: 1.5rem;
  }

  /* ============================================
     LINKS - Victorian hunter green instead of blue
     ============================================ */
  .link {
    color: var(--color-victorian-hunter-600);
    transition: color 0.15s ease-in-out;
  }
  .link:hover {
    color: var(--color-victorian-hunter-800);
  }
  .link:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .link-subtle {
    /* For less prominent links */
    color: var(--color-victorian-ink-muted);
  }
  .link-subtle:hover {
    color: var(--color-victorian-hunter-600);
  }

  /* ============================================
     INFO/HIGHLIGHT CARDS - Soft hunter green tones
     ============================================ */
  .card-info {
    /* Info highlight box - replaces blue-50/blue-200 patterns */
    background-color: var(--color-moxon-50);
    border: 1px solid var(--color-moxon-200);
    border-radius: var(--radius-xs);
    padding: 1rem;
  }

  .card-highlight {
    /* Stronger highlight - for featured sections */
    background-color: var(--color-moxon-100);
    border: 1px solid var(--color-moxon-300);
    border-radius: var(--radius-xs);
    padding: 1rem;
  }

  /* ============================================
     INTERACTIVE ANIMATIONS
     ============================================ */
  .card-interactive {
    transition: transform var(--duration-fast) var(--ease-out-soft),
                box-shadow var(--duration-fast) var(--ease-out-soft);
  }
  .card-interactive:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 16px -4px rgb(0 0 0 / 0.1),
                0 4px 6px -2px rgb(0 0 0 / 0.05);
  }

  .btn-press {
    transition: transform var(--duration-instant) var(--ease-out-soft);
  }
  .btn-press:active {
    transform: scale(0.97);
  }

  .link-animated {
    position: relative;
  }
  .link-animated::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 1px;
    background: currentColor;
    transform: scaleX(0);
    transform-origin: right;
    transition: transform var(--duration-fast) var(--ease-out-soft);
  }
  .link-animated:hover::after {
    transform: scaleX(1);
    transform-origin: left;
  }

  /* ============================================
     MODAL & DROPDOWN TRANSITIONS
     ============================================ */
  .modal-backdrop-enter-from,
  .modal-backdrop-leave-to {
    opacity: 0;
  }
  .modal-backdrop-enter-active,
  .modal-backdrop-leave-active {
    transition: opacity var(--duration-normal) var(--ease-out-soft);
  }

  .modal-enter-from {
    opacity: 0;
    transform: translateY(16px) scale(0.98);
  }
  .modal-leave-to {
    opacity: 0;
    transform: translateY(-8px) scale(0.98);
  }
  .modal-enter-active {
    transition: all var(--duration-normal) var(--ease-spring);
  }
  .modal-leave-active {
    transition: all var(--duration-fast) var(--ease-out-soft);
  }

  .dropdown-enter-from,
  .dropdown-leave-to {
    opacity: 0;
    transform: translateY(-4px);
  }
  .dropdown-enter-active,
  .dropdown-leave-active {
    transition: all var(--duration-fast) var(--ease-out-soft);
  }

  /* ============================================
     LOADING SPINNERS - Victorian colors
     ============================================ */
  .spinner {
    border: 2px solid var(--color-victorian-hunter-600);
    border-top-color: transparent;
    border-radius: 9999px;
    animation: spin 1s linear infinite;
  }

  .spinner-lg {
    width: 2rem;
    height: 2rem;
    border-width: 3px;
  }

  .spinner-xl {
    width: 3rem;
    height: 3rem;
    border-width: 4px;
  }

  @keyframes spin {
    to {
      transform: rotate(360deg);
    }
  }

  /* ============================================
     SKELETON LOADING
     ============================================ */
  .skeleton {
    background: linear-gradient(
      90deg,
      rgb(0 0 0 / 0.06) 25%,
      rgb(0 0 0 / 0.12) 50%,
      rgb(0 0 0 / 0.06) 75%
    );
    background-size: 200% 100%;
    animation: skeleton-pulse var(--duration-slower) var(--ease-in-out) infinite;
    border-radius: 4px;
  }

  @keyframes skeleton-pulse {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  .skeleton-text {
    height: 1em;
    margin-bottom: 0.5em;
  }
  .skeleton-title {
    height: 1.5em;
    width: 60%;
  }
  .skeleton-image {
    aspect-ratio: 4/3;
  }

  /* ============================================
     PROGRESS BARS - Victorian colors with animation
     ============================================ */
  .progress-bar {
    height: 4px;
    background: rgb(0 0 0 / 0.1);
    border-radius: 2px;
    overflow: hidden;
  }

  .progress-bar-fill {
    height: 100%;
    background: var(--color-victorian-hunter-500);
    transition: width var(--duration-normal) var(--ease-out-soft);
    border-radius: 2px;
  }

  .progress-bar-gold .progress-bar-fill {
    background: var(--color-victorian-gold);
  }

  .progress-bar-indeterminate .progress-bar-fill {
    width: 30%;
    animation: progress-slide 1.5s var(--ease-in-out) infinite;
  }

  @keyframes progress-slide {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(400%); }
  }

  /* ============================================
     STATUS BADGES - Victorian theme
     ============================================ */
  .badge-status {
    display: inline-flex;
    align-items: center;
    padding: 0.125rem 0.5rem;
    font-size: 0.75rem;
    font-weight: 500;
    border-radius: var(--radius-xs);
  }

  .badge-transit {
    /* In transit status - replaces bg-blue-100 text-blue-800 */
    background-color: var(--color-moxon-100);
    color: var(--color-victorian-hunter-800);
  }

  .badge-pending {
    background-color: var(--color-victorian-paper-aged);
    color: var(--color-victorian-ink-dark);
  }

  .badge-success {
    background-color: #dcfce7;
    color: #166534;
  }

  .badge-warning {
    background-color: #fef3c7;
    color: #92400e;
  }

  .badge-error {
    background-color: #fee2e2;
    color: #991b1b;
  }

  /* ============================================
     TABS - Victorian theme
     ============================================ */
  .tab {
    padding: 0.5rem 1rem;
    border-bottom: 2px solid transparent;
    font-weight: 500;
    color: var(--color-victorian-ink-muted);
    transition: all 0.15s ease-in-out;
  }
  .tab:hover {
    color: var(--color-victorian-hunter-600);
  }
  .tab-active {
    border-bottom-color: var(--color-victorian-hunter-600);
    color: var(--color-victorian-hunter-700);
  }

  /* ============================================
     TEXT STATUS - Victorian colors for status text
     ============================================ */
  .text-status-running {
    color: var(--color-victorian-hunter-600);
  }
}

/* Prevent horizontal scroll on mobile and handle safe areas */
@layer base {
  html,
  body {
    @apply overflow-x-hidden;
    @apply bg-victorian-paper-aged;
  }

  /* iOS safe area support for notch devices - left/right only, nav handles top */
  body {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  /* Display typography for headings */
  h1,
  h2,
  .font-display {
    font-family: "Cormorant Garamond", Georgia, serif;
    @apply font-semibold tracking-wide;
  }

  h1 {
    @apply text-3xl md:text-4xl text-victorian-ink-black;
  }

  h2 {
    @apply text-2xl md:text-2xl text-victorian-ink-black;
  }

  h3 {
    @apply text-lg text-victorian-ink-dark;
  }
}

/* ============================================
   PRINT STYLES - Global
   ============================================ */
@media print {
  /* Hide navigation bar when printing */
  nav {
    display: none !important;
  }

  /* Hide elements marked as no-print */
  .no-print {
    display: none !important;
  }

  /* Remove background colors for printing */
  body,
  html {
    background: white !important;
  }

  /* Ensure content fills page width */
  .container {
    max-width: none !important;
    padding: 0 !important;
  }

  /* Optimize cards for print */
  .card,
  .card-static {
    box-shadow: none !important;
    border: 1px solid #ccc !important;
    break-inside: avoid;
  }

  /* Show print-only elements */
  .print-only {
    display: block !important;
  }

  /* When printing analysis, hide the main app content (background page) */
  body.printing-analysis > #app {
    display: none !important;
  }

  /* Keep the teleported analysis viewer visible */
  body.printing-analysis > [data-analysis-viewer] {
    display: block !important;
    position: static !important;
  }
}
